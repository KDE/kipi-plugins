REMOVE_DEFINITIONS(-DQT_USE_FAST_OPERATOR_PLUS)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}
                    ${CMAKE_CURRENT_BINARY_DIR}/src
                    src
                    ${QT_INCLUDE_DIR}
                   )

SET(QtSoap_SRCS src/qtsoap.cpp)

QT4_WRAP_CPP(QtSoap_MOC_SRCS src/qtsoap.h)

SET(SRCS ${QtSoap_MOC_SRCS} ${QtSoap_SRCS})

FOREACH(_currentfile ${SRCS})
    IF(NOT MSVC)
        SET_SOURCE_FILES_PROPERTIES(${_currentfile} PROPERTIES COMPILE_FLAGS "-fPIC")
    ENDIF(NOT MSVC)
ENDFOREACH(_currentfile ${SRCS})

ADD_LIBRARY(QtSoap STATIC ${SRCS})

IF(NOT MSVC)
    SET_TARGET_PROPERTIES(QtSoap PROPERTIES COMPILE_FLAGS "-fPIC")
ENDIF(NOT MSVC)

TARGET_LINK_LIBRARIES(QtSoap ${QT_LIBRARIES})

INSTALL(TARGETS QtSoap ARCHIVE DESTINATION lib ${INSTALL_TARGETS_DEFAULT_ARGS})
